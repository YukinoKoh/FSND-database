Login project with [Google ID](https://developers.google.com/identity/sign-in/web/)
and [Facebook login](https://developers.facebook.com/docs/facebook-login/web)

## File Structure
- `project.py`
- `database_setup.py`: It will set up database using sqlalchemy
- `users.db`: This file is generated by running `database_setup.py`
- `templates`: html templates folder for flask
 - `signin.html`: Shows Google and Facebook signin button
 - `in.html`: Shows user info and sign out button
- `static`: static folder which includes js, css, img for flask
 
## Google oauth usage steps
1. [Frontend] Google signin button with clientID to retrieve ID token 
2. [Backend] Verify the token with Google, using ClientID etc.
3. [Backend] Examine the retrieved result the USER ID from [2]
4. [Backend] Examine the retrieved result the CLIENT ID from [2]
5. [Backend] Login the user, storing user data to the session (Flask)
6. [Frontend] send the user to the next page. 

## Obtain Google OAuth clientID
1. Go to [Google developer site](console.developers.google.com)
2. APIs&Services > Credentials > Create Credentials > OAuth clientID
3. Add http://localhost:5000 to created clientID > Authorised JavaScript origins
4. (Download jsonfile for development and save it in the directory. 

## Google Login ajax attributes
- `data-scope`: data to retrieve ex). "openid email"
- `data-clientid`: Google CLIENTID
- `data-redirecturi`: one-time use code flow ex). "postmessage"
- `data-accesstype`: access type ex) "offline" This allows access even when user is not logged in
- `data-cookiepolicy`: scope of URI. ex) "single_host_origin" This means no subdomain
- `data-callback`: CALBACK FUNCTION NAME
- `data-approvalprompt`: Whether they should login eaxh time visited or not ex) "force"

## Facebook oauth usage steps
1. [Frontend] Facebook signin button to get access token
2. [Backend] Get token with the access token, client ID, Secret code
3. [Backend] Get user info with the token
4. [Backend] Login user, storing the data to the session (Flask)
5. [Frontend] Redirect the user to the next page

## Signed out
1. [Frontend] Use Google or Facebook scheme to signed out
2. [Backend] Delete related session log
3. [Frontend] Redirect the user to the next page

## Further Security tips
- Pass session state between the front and back to examine the token, using `from flask import session as login_session`
- authorization code into a credential object using `from oauth2client.client import flow_from_clientsecrets`



 
