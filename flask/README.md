project with [Flask](http://flask.pocoo.org/)

## File Structure
- `project.py`
- `database_setup.py`: It will set up database using sqlalchemy
- `restaurantmenu.db`: This file is generated by running `database_setup.py`
- `sample_session.py`: Session objects to updata the database
- `templates`: html templates folder for flask
- `static`: static folder which includes js, css, img for flask
- `Gruntfile.js`: Grunt task file
- `Gruntfile.yml`: Grunt directory file
- `package-lock.json`: npm package for Grunt usage
- `package.json`: same as the above
- `node_modules`: same as the above


## Flask
#### render template html
Call `render_template('TEMPLATE_NAME.html',params)
```
render_template('newmenuitem.html', restaurant_id=restaurant_id)
```

#### `@app.route()` in `project.py`
`@app.route` binds to a specific url, also to dynamic url
```
@app.route('/restaurants/<int:restaurant_id>/')
@app.route('/restaurants/<int:restaurant_id>/new', methods=['GET', 'POST'])
```
type can be int, string, path 

#### Message flashing
It records a message at the end of a request and access it next request and only next request. [more about flashing massage](http://flask.pocoo.org/docs/0.12/patterns/flashing/)
 
use `flash()` to store message in `project.py`
```
flash("The menu item has deleted.")
```
use `get_flashed_messages()` in templates to retrieve the message
```
{% with messages = get_flashed_messages() %}
  {% if messages %}
    {% for message in messages %}
      {{ message }}
    {% endfor %}
  {% endif %}
{% endwith %}
```

#### `url_for` in templates
- To call function `FUNCTION_NAME`
- To generate URLs for static files, `'static'`:
```
url_for('editMenuItem', restaurant_id=restaurant.id, menu_id=i.id)
url_for('static', filename='style.css')
```

#### responding with JSON
1. Add function to send JSON in Base class in `database_setup.py` which returns data for JSON format.
```
    @property
    def serialize(self):
        return{
            'name': self.name,
            'id': self.id,
        }
```
2. Import jsonify in `project.py`
3. Add funtion to return a JSON object.
```
@app.route('/restaurants/<int:TARGET_ID>/JSON')
def restaurantMenuJSON(TARGET_ID):
    # query data
    items = session.query(TARGET_CLASS).filter_by(CLASS_ID=TARGET_ID).all()
    # format to json
    return jsonify(Items=[i.serialize for i in items])
```

#### Useful links
- [python decoration](http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/)
- [python with](http://effbot.org/zone/python-with-statement.htm)
- [Flast url_for](http://flask.pocoo.org/docs/0.12/quickstart/)
- [Grunt setup](https://gruntjs.com/getting-started)
- [grunt-contrib-watch](https://github.com/gruntjs/grunt-contrib-watch)
- [grunt-sass](https://github.com/sindresorhus/grunt-sass)
- [npm - package.json](https://docs.npmjs.com/getting-started/using-a-package.json)
